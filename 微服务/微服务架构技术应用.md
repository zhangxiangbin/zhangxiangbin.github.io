第一天：微服务的基础知识，Spring Cloud介绍，注册中心，ribbon

第二天：feign组件，hystrix熔断

第三天：微服务API网关，链路追踪

第四天：消息中间件处理，分布式配置中心

# 系统架构演变

## 单体应用架构

优点：开发简单，适用于小型应用

缺点：不易拓展和维护，代码耦合

## 垂直应用架构

优点：解决高并发问题，针对不同模块优化，方便水平扩展，容错。

缺点：系统间相互独立，重复开发工作

## 分布式架构

特点：服务的评估、治理、调度。

1. SOA（Service-Oriented Architecture）,即面向服务的架构。可以根据需求通过网络对松散耦合的粗粒度应用组件（服务）进行分布式部署、组合和使用，一个服务通常以独立的形式存在于操作系统进程中。

   站在功能的角度，把业务逻辑抽象成可复用、可组装的服务，通过服务的编排实现业务的快速再生，目的：把原先固有的业务功能转变为通用的业务服务，实现业务逻辑的快速复用。

   SOA特点：分布式、可重用、扩展灵活、松耦合。

   优点：抽取公共的功能为服务，提高开发效率；对不同的服务进行集群化部署解决系统压力；基于ESB/DUBBO减少系统耦合。

   缺点：抽取服务的粒度较大；服务提供方和调用方接口耦合度较高。

2. 微服务架构

   优点：通过服务的原子拆分，以及微服务的独立打包、部署和升级，小团队的交付周期将缩短，运维成本也将大幅下降。微服务遵循单一原则，微服务之间采用Restful等轻量协议传输。

   缺点：微服务过多，服务治理成本高，不利于系统维护；分布式系统开发的技术成本高（容错，分布式事务等）。

# 核心概念

## 远程调用技术

1. RPC协议（基于TCP）

   Remote Procedure Call一种进程间通信方式。允许像调用本地服务一样调用远程服务。RPC框架的主要目标是让远程服务调用更简单、透明。RPC框架负责屏蔽底层的传输方式（TCP或UDP）、序列化方式（XML/JSON/二进制）和通信细节。开发人员在使用时只需要了解谁在什么位置提供了什么样的远程服务接口即可，并不需要关心底层通信细节和调用过程。

   

2. RESTful接口（基于HTTP）

   REST即Representational State Transfer，如果一个架构符合REST原则，就称它为RESTful架构。

   资源，是指网络上的一个实体，或者说是网络上的一个具体信息。它可以是一段文本、一张图片、一首歌曲、一种服务，总之就是一个具体的存在。可以用URI（统一资源定位符）指向它，每种资源对应特定的URI，要获取这个资源，访问它的UIR就可以。

   REST的名称“表现层状态转化”中，省略了主语，“表现层”其实指的是“资源的表现层”。


## CAP原理

1. A可用性：多节点
2. C一致性：多节点数据一致
3. P分区容忍性：数据存到多个地方

不可能同时满足CAP

AC：放弃分区容忍，物理数据库

AP：可以短暂允许数据不一致，NoSQL数据库

CP：放弃可用性


# Spring Cloud
## 常见微服务框架

* Spring Cloud
* Apache Service Comb
* ZeroC ICE

## Spring Cloud介绍

Spring Cloud是一系列框架的有序组合，利用Spring Boot的开发便利性巧妙地简化了分布式系统基础设施的开发，如服务发现注册、配置中心、消息总线、负载均衡、断路器、数据监控等，都可以用Spring Boot的开发风格做到一键启动和部署。

Spring Cloud并没有重复造轮子，它只是将目前各家公司开发的比较成熟，经得起实际考验的服务框架组合起来，通过Spring Boot风格进行再封装屏蔽掉了复杂的配置和实现原理，最终给开发者留出了一套简单易懂、易部署和易维护的分布式开发工具包。

Spring Cloud Netflix组件

| 组件名称 | 作用 |
| -------- | ---- |
|Eureka          | 服务注册中心     |
| Ribbon	| 客户端负载均衡|
| Feign| 声明式服务调用|
|Hystrix | 客户端容错保护|
| Zuul|API服务网关|

Spring Cloud Alibaba组件

| 组件名称 | 作用           |
| -------- | -------------- |
| Nacos    | 服务注册中心   |
| Sentinel | 客户端容错保护 |

Spring Cloud 原生及其他组件

| 组件名称      | 作用           |
| ------------- | -------------- |
| Consul        | 服务注册中心   |
| Config        | 分布式配置中心 |
| Gateway       | API服务网关    |
| Sleuth/Zipkin | 分布式链路追踪 |

